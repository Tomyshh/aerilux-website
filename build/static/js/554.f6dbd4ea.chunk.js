"use strict";(self.webpackChunkaerilux_website=self.webpackChunkaerilux_website||[]).push([[554],{9554:(e,n,r)=>{r.r(n),r.d(n,{default:()=>_e});var t,a,i,o,s,d,l,c,u,m,p,h,f,x,y,g,A,b,j,_,v,P,S,w,C,k,E,N,T,U,z,I=r(9379),M=r(7528),R=r(5043),O=r(5464),q=r(2924),Y=r(3216),F=r(1128),W=r(5599),B=r(6923),D=r(579);const K=O.Ay.div(t||(t=(0,M.A)(["\n  min-height: 100vh;\n  padding: 2rem;\n"]))),L=O.Ay.div(a||(a=(0,M.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n"]))),H=O.Ay.h1(i||(i=(0,M.A)(["\n  font-size: 3rem;\n  font-weight: 800;\n  margin-bottom: 3rem;\n"]))),V=O.Ay.div(o||(o=(0,M.A)(["\n  display: grid;\n  grid-template-columns: 1fr 400px;\n  gap: 3rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Z=O.Ay.form(s||(s=(0,M.A)([""]))),Q=O.Ay.div(d||(d=(0,M.A)(["\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  padding: 2rem;\n  margin-bottom: 2rem;\n"]))),X=O.Ay.h2(l||(l=(0,M.A)(["\n  font-size: 1.5rem;\n  margin-bottom: 2rem;\n"]))),J=O.Ay.div(c||(c=(0,M.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),G=O.Ay.div(u||(u=(0,M.A)(["\n  grid-column: ",";\n"])),(e=>e.fullWidth?"1 / -1":"auto")),$=O.Ay.label(m||(m=(0,M.A)(["\n  display: block;\n  font-size: 0.9rem;\n  color: #999999;\n  margin-bottom: 0.5rem;\n"]))),ee=O.Ay.input(p||(p=(0,M.A)(["\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 0.75rem 1rem;\n  color: #ffffff;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #ffffff;\n    background: rgba(255, 255, 255, 0.15);\n  }\n  \n  &::placeholder {\n    color: #666666;\n  }\n"]))),ne=O.Ay.div(h||(h=(0,M.A)(["\n  width: 100%;\n  min-height: 48px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 0.75rem 1rem;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n"]))),re=O.Ay.select(f||(f=(0,M.A)(["\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 0.75rem 1rem;\n  color: #ffffff;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #ffffff;\n    background: rgba(255, 255, 255, 0.15);\n  }\n  \n  option {\n    background: #000000;\n  }\n"]))),te=O.Ay.div(x||(x=(0,M.A)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  margin-bottom: 2rem;\n"]))),ae=(0,O.Ay)(q.P.div)(y||(y=(0,M.A)(["\n  padding: 1.5rem;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 15px;\n  cursor: pointer;\n  text-align: center;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"])),(e=>e.selected?"rgba(255, 255, 255, 0.15)":"rgba(255, 255, 255, 0.05)"),(e=>e.selected?"#ffffff":"transparent")),ie=O.Ay.div(g||(g=(0,M.A)(["\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n"]))),oe=O.Ay.p(A||(A=(0,M.A)(["\n  font-size: 0.9rem;\n"]))),se=O.Ay.div(b||(b=(0,M.A)(["\n  position: sticky;\n  top: 100px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  padding: 2rem;\n  height: fit-content;\n"]))),de=O.Ay.div(j||(j=(0,M.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),le=O.Ay.div(_||(_=(0,M.A)(["\n  flex: 1;\n"]))),ce=O.Ay.p(v||(v=(0,M.A)(["\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n"]))),ue=O.Ay.p(P||(P=(0,M.A)(["\n  font-size: 0.9rem;\n  color: #999999;\n"]))),me=O.Ay.p(S||(S=(0,M.A)(["\n  font-weight: 600;\n"]))),pe=O.Ay.div(w||(w=(0,M.A)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),he=O.Ay.span(C||(C=(0,M.A)(["\n  color: #999999;\n"]))),fe=O.Ay.span(k||(k=(0,M.A)(["\n  font-weight: 600;\n"]))),xe=(0,O.Ay)(pe)(E||(E=(0,M.A)(["\n  border-bottom: none;\n  border-top: 2px solid rgba(255, 255, 255, 0.2);\n  margin-top: 1rem;\n  padding-top: 1.5rem;\n"]))),ye=O.Ay.span(N||(N=(0,M.A)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n"]))),ge=O.Ay.span(T||(T=(0,M.A)(["\n  font-size: 1.5rem;\n  font-weight: 800;\n"]))),Ae=(0,O.Ay)(q.P.button)(U||(U=(0,M.A)(["\n  width: 100%;\n  background-color: #ffffff;\n  color: #000000;\n  padding: 1.25rem 2rem;\n  border-radius: 50px;\n  font-weight: 600;\n  font-size: 1.1rem;\n  margin-top: 2rem;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),be=O.Ay.div(z||(z=(0,M.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 1rem;\n  font-size: 0.9rem;\n  color: #999999;\n"])));function je(e){const n=(e||"").trim();return"US"===n.toUpperCase()?"United States":"CA"===n.toUpperCase()?"Canada":n}const _e=()=>{const e=(0,Y.Zp)(),{items:n}=(0,F._)(),[r]=(0,R.useState)("payme"),[t,a]=(0,R.useState)(!1),[i,o]=(0,R.useState)(null),[s,d]=(0,R.useState)(null),[l,c]=(0,R.useState)(!1),[u,m]=(0,R.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",address2:"",city:"",state:"",zipCode:"",country:"US"}),[p,h]=(0,R.useState)(null),[f,x]=(0,R.useState)(W.HA);(0,R.useEffect)((()=>{(async()=>{try{const e=await B.U.getPrice();h(e.price),x(e.currency||W.HA)}catch(e){}})()}),[]),(0,R.useEffect)((()=>{let e=!1;return(async()=>{try{if(await function(){const e=document.querySelector('script[data-payme-hostedfields="true"]');return e?e.__loaded?Promise.resolve():new Promise(((n,r)=>{e.addEventListener("load",(()=>n()),{once:!0}),e.addEventListener("error",(()=>r(new Error("PayMe script load failed"))),{once:!0})})):new Promise(((e,n)=>{const r=document.createElement("script");r.src="https://cdn.paymeservice.com/hf/v1/hostedfields.js",r.async=!0,r.dataset.paymeHostedfields="true",r.onload=()=>{r.__loaded=!0,e()},r.onerror=()=>n(new Error("PayMe script load failed")),document.head.appendChild(r)}))}(),e)return;const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://uceyszidppfmaswwxfbe.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_BjNRun294u_Fi-UxY28sTQ_ZPohuhjt"}.REACT_APP_PAYME_API_KEY;if(!n)return c(!1),void o("PayMe: API key manquante (REACT_APP_PAYME_API_KEY)");const r="true"===({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://uceyszidppfmaswwxfbe.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_BjNRun294u_Fi-UxY28sTQ_ZPohuhjt"}.REACT_APP_PAYME_TEST_MODE||"").toLowerCase()||!1,t=window.PayMe;if(!t)return c(!1),void o("PayMe: script charg\xe9 mais PayMe indisponible");const a=await t.create(n,{testMode:r});if(e)return;d(a)}catch(n){if(e)return;c(!1),o((null===n||void 0===n?void 0:n.message)||"PayMe: impossible de charger le module de paiement")}})(),()=>{e=!0}}),[]),(0,R.useEffect)((()=>{if(!s)return;const e=window.PayMe;if(e)try{const n=s.hostedFields(),r=n.create(e.fields.NUMBER),t=n.create(e.fields.EXPIRATION),a=n.create(e.fields.CVC);r.mount("#card-number-container"),t.mount("#expiration-container"),a.mount("#cvc-container"),c(!0)}catch(n){c(!1),o((null===n||void 0===n?void 0:n.message)||"PayMe: impossible d\u2019initialiser les champs carte")}}),[s]);const y=n.reduce(((e,n)=>e+n.quantity),0),g=null!=p?p*y:0,A=g,b=(0,R.useMemo)((()=>n.map((e=>(0,I.A)((0,I.A)({item_id:e.sku,item_name:e.name},null!=p?{price:p}:{}),{},{quantity:e.quantity,item_category:"product"})))),[n,p]);(0,R.useEffect)((()=>{0!==n.length&&(0,W.sx)("begin_checkout",{currency:f,value:null!=p?A:void 0,items:b})}),[n.length,A,b,f,p]),(0,R.useEffect)((()=>{0!==n.length&&(0,W.sx)("add_payment_info",{currency:f,value:null!=p?A:void 0,payment_type:r,items:b})}),[r,n.length,A,b,f,p]);const j=e=>{const{name:n,value:r}=e.target;m((e=>(0,I.A)((0,I.A)({},e),{},{[n]:r})))};return 0===n.length?(e("/cart"),null):(0,D.jsx)(K,{children:(0,D.jsxs)(L,{children:[(0,D.jsx)(H,{children:"Checkout"}),i&&(0,D.jsx)("div",{style:{background:"rgba(255, 59, 48, 0.12)",border:"1px solid rgba(255, 59, 48, 0.35)",color:"#ff6b6b",padding:"1rem 1.25rem",borderRadius:12,marginBottom:"1.5rem"},children:i}),(0,D.jsxs)(V,{children:[(0,D.jsxs)(Z,{id:"checkout-form",onSubmit:async r=>{r.preventDefault(),a(!0),o(null);try{(0,W.sx)("add_shipping_info",{currency:f,value:null!=p?A:void 0,shipping_tier:"free",items:b});const r=window.location.origin,t="".concat(r,"/checkout/success"),a="".concat(r,"/checkout/cancel");if(!s||!l)throw new Error("PayMe: champs de carte non pr\xeats");if(null==p)throw new Error("Prix indisponible, veuillez r\xe9essayer dans un instant.");const i=await s.tokenize({payerFirstName:u.firstName,payerLastName:u.lastName,payerEmail:u.email,payerPhone:u.phone,payerSocialId:"",total:{label:"Aerilux Starter Pack",amount:{currency:f||W.HA,value:String(A)}}}),o=(null===i||void 0===i?void 0:i.token)||(null===i||void 0===i?void 0:i.buyer_key)||(null===i||void 0===i?void 0:i.buyerKey);if(!i||"tokenize-success"!==i.type||!o)throw console.error("PayMe tokenize failed:",i),new Error("PayMe tokenization failed");const d={buyerToken:o,customer:{firstName:u.firstName,lastName:u.lastName,email:u.email,phone:u.phone,address:u.address,address2:u.address2||void 0,city:u.city,state:u.state||void 0,zipCode:u.zipCode,country:je(u.country)},items:n.map((e=>({name:"Aerilux Starter Pack",sku:e.sku,quantity:e.quantity}))),returnUrl:t,cancelUrl:a,metadata:{source:"website"}},c=await B.U.createPaymeSale(d);if(localStorage.setItem("orderId",c.orderId),localStorage.setItem("orderNumber",c.orderNumber),localStorage.setItem("lastOrderId",c.orderId),localStorage.setItem("lastOrderNumber",c.orderNumber),c.paymeSaleId&&localStorage.setItem("lastPaymeSaleId",c.paymeSaleId),(0,W.sx)("checkout_progress",{step:"paid"===c.status?"paid":c.checkoutUrl?"redirect_to_payme":"pending",order_id:c.orderId,order_number:c.orderNumber}),"paid"===c.status)return void e("/checkout/success");if(c.checkoutUrl)return void(window.location.href=c.checkoutUrl);e("/checkout/success")}catch(t){console.error("Order failed:",t);const e=(null===t||void 0===t?void 0:t.message)||"Checkout error";o(e),a(!1)}},children:[(0,D.jsxs)(Q,{children:[(0,D.jsx)(X,{children:"Shipping Information"}),(0,D.jsxs)(J,{children:[(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"First Name"}),(0,D.jsx)(ee,{type:"text",name:"firstName",value:u.firstName,onChange:j,placeholder:"John",required:!0})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"Last Name"}),(0,D.jsx)(ee,{type:"text",name:"lastName",value:u.lastName,onChange:j,placeholder:"Doe",required:!0})]}),(0,D.jsxs)(G,{fullWidth:!0,children:[(0,D.jsx)($,{children:"Email"}),(0,D.jsx)(ee,{type:"email",name:"email",value:u.email,onChange:j,placeholder:"john@example.com",required:!0})]}),(0,D.jsxs)(G,{fullWidth:!0,children:[(0,D.jsx)($,{children:"Phone"}),(0,D.jsx)(ee,{type:"tel",name:"phone",value:u.phone,onChange:j,placeholder:"+1 (555) 123-4567",required:!0})]}),(0,D.jsxs)(G,{fullWidth:!0,children:[(0,D.jsx)($,{children:"Address"}),(0,D.jsx)(ee,{type:"text",name:"address",value:u.address,onChange:j,placeholder:"123 Main Street",required:!0})]}),(0,D.jsxs)(G,{fullWidth:!0,children:[(0,D.jsx)($,{children:"Apartment, suite, etc. (optional)"}),(0,D.jsx)(ee,{type:"text",name:"address2",value:u.address2,onChange:j,placeholder:"Apt 4B"})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"City"}),(0,D.jsx)(ee,{type:"text",name:"city",value:u.city,onChange:j,placeholder:"New York",required:!0})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"State"}),(0,D.jsxs)(re,{name:"state",value:u.state,onChange:j,required:!0,children:[(0,D.jsx)("option",{value:"",children:"Select State"}),(0,D.jsx)("option",{value:"NY",children:"New York"}),(0,D.jsx)("option",{value:"CA",children:"California"}),(0,D.jsx)("option",{value:"TX",children:"Texas"})]})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"ZIP Code"}),(0,D.jsx)(ee,{type:"text",name:"zipCode",value:u.zipCode,onChange:j,placeholder:"10001",required:!0})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"Country"}),(0,D.jsxs)(re,{name:"country",value:u.country,onChange:j,required:!0,children:[(0,D.jsx)("option",{value:"US",children:"United States"}),(0,D.jsx)("option",{value:"CA",children:"Canada"})]})]})]})]}),(0,D.jsxs)(Q,{children:[(0,D.jsx)(X,{children:"Payment"}),(0,D.jsx)(te,{children:(0,D.jsxs)(ae,{selected:"payme"===r,children:[(0,D.jsx)(ie,{children:"\ud83d\udd12"}),(0,D.jsx)(oe,{children:"PayMe (secure checkout)"})]})}),(0,D.jsxs)(J,{children:[(0,D.jsxs)(G,{fullWidth:!0,children:[(0,D.jsx)($,{children:"Card number"}),(0,D.jsx)(ne,{id:"card-number-container"})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"Expiration"}),(0,D.jsx)(ne,{id:"expiration-container"})]}),(0,D.jsxs)(G,{children:[(0,D.jsx)($,{children:"CVC"}),(0,D.jsx)(ne,{id:"cvc-container"})]})]})]})]}),(0,D.jsxs)(se,{children:[(0,D.jsx)(X,{children:"Order Summary"}),n.map((e=>(0,D.jsxs)(de,{children:[(0,D.jsxs)(le,{children:[(0,D.jsx)(ce,{children:e.name}),(0,D.jsxs)(ue,{children:["Qty: ",e.quantity]})]}),(0,D.jsx)(me,{children:null!=p?"".concat(f," ").concat((p*e.quantity).toFixed(2)):"\u2014"})]},e.sku))),(0,D.jsxs)(pe,{children:[(0,D.jsx)(he,{children:"Subtotal"}),(0,D.jsx)(fe,{children:null!=p?"".concat(f," ").concat(g.toFixed(2)):"\u2014"})]}),(0,D.jsxs)(xe,{children:[(0,D.jsx)(ye,{children:"Total"}),(0,D.jsx)(ge,{children:null!=p?"".concat(f," ").concat(A.toFixed(2)):"\u2014"})]}),(0,D.jsx)(Ae,{type:"submit",form:"checkout-form",disabled:t,onClick:()=>{(0,W.d4)({contentType:"checkout_place_order_click",location:"checkout_page"})},children:t?"Processing...":"Place Order"}),(0,D.jsxs)(be,{children:[(0,D.jsx)("span",{children:"\ud83d\udd12"}),(0,D.jsx)("span",{children:"You will be redirected to PayMe to complete the payment."})]})]})]})]})})}}}]);
//# sourceMappingURL=554.f6dbd4ea.chunk.js.map