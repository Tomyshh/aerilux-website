"use strict";(self.webpackChunkaerilux_website=self.webpackChunkaerilux_website||[]).push([[845],{2845:(e,n,r)=>{r.r(n),r.d(n,{default:()=>fe});var t=r(9379),a=r(7528),s=r(5043),i=r(5464),o=r(2924),d=r(3216),l=r(1128),c=r(5599);const h=async e=>{const n=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://uceyszidppfmaswwxfbe.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_BjNRun294u_Fi-UxY28sTQ_ZPohuhjt"}.REACT_APP_BACKEND_URL||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://uceyszidppfmaswwxfbe.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_BjNRun294u_Fi-UxY28sTQ_ZPohuhjt"}.REACT_APP_BACKEND||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://uceyszidppfmaswwxfbe.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_BjNRun294u_Fi-UxY28sTQ_ZPohuhjt"}.REACT_APP_API_URL||"http://localhost:3001").replace(/\/+$/,""),r=await fetch("".concat(n,"/checkout/payme/create-sale"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}),t=await r.json().catch((()=>({})));if(!r.ok){const e=(null===t||void 0===t?void 0:t.message)||"Checkout error",n=new Error(e);throw null!==t&&void 0!==t&&t.code&&(n.code=t.code),n}return t};var p,u,m,x,y,g,A,f,j,b,_,v,S,C,P,E,k,w,T,N,R,U,O,I,q,B,D,W,z,F,K=r(579);const Y=i.Ay.div(p||(p=(0,a.A)(["\n  min-height: 100vh;\n  padding: 2rem;\n"]))),H=i.Ay.div(u||(u=(0,a.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n"]))),L=i.Ay.h1(m||(m=(0,a.A)(["\n  font-size: 3rem;\n  font-weight: 800;\n  margin-bottom: 3rem;\n"]))),M=i.Ay.div(x||(x=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr 400px;\n  gap: 3rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Z=i.Ay.form(y||(y=(0,a.A)([""]))),$=i.Ay.div(g||(g=(0,a.A)(["\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  padding: 2rem;\n  margin-bottom: 2rem;\n"]))),Q=i.Ay.h2(A||(A=(0,a.A)(["\n  font-size: 1.5rem;\n  margin-bottom: 2rem;\n"]))),V=i.Ay.div(f||(f=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),J=i.Ay.div(j||(j=(0,a.A)(["\n  grid-column: ",";\n"])),(e=>e.fullWidth?"1 / -1":"auto")),X=i.Ay.label(b||(b=(0,a.A)(["\n  display: block;\n  font-size: 0.9rem;\n  color: #999999;\n  margin-bottom: 0.5rem;\n"]))),G=i.Ay.input(_||(_=(0,a.A)(["\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 0.75rem 1rem;\n  color: #ffffff;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #ffffff;\n    background: rgba(255, 255, 255, 0.15);\n  }\n  \n  &::placeholder {\n    color: #666666;\n  }\n"]))),ee=i.Ay.select(v||(v=(0,a.A)(["\n  width: 100%;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  padding: 0.75rem 1rem;\n  color: #ffffff;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #ffffff;\n    background: rgba(255, 255, 255, 0.15);\n  }\n  \n  option {\n    background: #000000;\n  }\n"]))),ne=i.Ay.div(S||(S=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  margin-bottom: 2rem;\n"]))),re=(0,i.Ay)(o.P.div)(C||(C=(0,a.A)(["\n  padding: 1.5rem;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 15px;\n  cursor: pointer;\n  text-align: center;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n"])),(e=>e.selected?"rgba(255, 255, 255, 0.15)":"rgba(255, 255, 255, 0.05)"),(e=>e.selected?"#ffffff":"transparent")),te=i.Ay.div(P||(P=(0,a.A)(["\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n"]))),ae=i.Ay.p(E||(E=(0,a.A)(["\n  font-size: 0.9rem;\n"]))),se=i.Ay.div(k||(k=(0,a.A)(["\n  position: sticky;\n  top: 100px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  padding: 2rem;\n  height: fit-content;\n"]))),ie=i.Ay.div(w||(w=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),oe=i.Ay.div(T||(T=(0,a.A)(["\n  flex: 1;\n"]))),de=i.Ay.p(N||(N=(0,a.A)(["\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n"]))),le=i.Ay.p(R||(R=(0,a.A)(["\n  font-size: 0.9rem;\n  color: #999999;\n"]))),ce=i.Ay.p(U||(U=(0,a.A)(["\n  font-weight: 600;\n"]))),he=i.Ay.div(O||(O=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n"]))),pe=i.Ay.span(I||(I=(0,a.A)(["\n  color: #999999;\n"]))),ue=i.Ay.span(q||(q=(0,a.A)(["\n  font-weight: 600;\n"]))),me=(0,i.Ay)(he)(B||(B=(0,a.A)(["\n  border-bottom: none;\n  border-top: 2px solid rgba(255, 255, 255, 0.2);\n  margin-top: 1rem;\n  padding-top: 1.5rem;\n"]))),xe=i.Ay.span(D||(D=(0,a.A)(["\n  font-size: 1.25rem;\n  font-weight: 700;\n"]))),ye=i.Ay.span(W||(W=(0,a.A)(["\n  font-size: 1.5rem;\n  font-weight: 800;\n"]))),ge=(0,i.Ay)(o.P.button)(z||(z=(0,a.A)(["\n  width: 100%;\n  background-color: #ffffff;\n  color: #000000;\n  padding: 1.25rem 2rem;\n  border-radius: 50px;\n  font-weight: 600;\n  font-size: 1.1rem;\n  margin-top: 2rem;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]))),Ae=i.Ay.div(F||(F=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 1rem;\n  font-size: 0.9rem;\n  color: #999999;\n"]))),fe=()=>{const e=(0,d.Zp)(),{items:n,getTotalPrice:r}=(0,l._)(),[a]=(0,s.useState)("payme"),[i,o]=(0,s.useState)(!1),[p,u]=(0,s.useState)(null),[m,x]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"US"}),[y,g]=(0,s.useState)(!0),[A,f]=(0,s.useState)({address1:"",address2:"",city:"",state:"",postalCode:"",country:"US"}),j=r(),b=.08*j,_=j+0+b,v=(0,s.useMemo)((()=>n.map((e=>({item_id:e.planId,item_name:e.planName,price:e.price,quantity:e.quantity,item_category:"plan"})))),[n]);(0,s.useEffect)((()=>{0!==n.length&&(0,c.sx)("begin_checkout",{currency:c.HA,value:_,items:v})}),[n.length,_,v]),(0,s.useEffect)((()=>{0!==n.length&&(0,c.sx)("add_payment_info",{currency:c.HA,value:_,payment_type:a,items:v})}),[a,n.length,_,v]);const S=e=>{const{name:n,value:r}=e.target;x((e=>(0,t.A)((0,t.A)({},e),{},{[n]:r})))},C=e=>{const{name:n,value:r}=e.target;f((e=>(0,t.A)((0,t.A)({},e),{},{[n]:r})))};return 0===n.length?(e("/cart"),null):(0,K.jsx)(Y,{children:(0,K.jsxs)(H,{children:[(0,K.jsx)(L,{children:"Checkout"}),p&&(0,K.jsx)("div",{style:{background:"rgba(255, 59, 48, 0.12)",border:"1px solid rgba(255, 59, 48, 0.35)",color:"#ff6b6b",padding:"1rem 1.25rem",borderRadius:12,marginBottom:"1.5rem"},children:p}),(0,K.jsxs)(M,{children:[(0,K.jsxs)(Z,{id:"checkout-form",onSubmit:async e=>{e.preventDefault(),o(!0),u(null);try{(0,c.sx)("add_shipping_info",{currency:c.HA,value:_,shipping_tier:"free",items:v});const e=window.location.origin,r="".concat(e,"/checkout/success"),t="".concat(e,"/checkout/cancel"),a={cart:{items:n.map((e=>({productId:"aerilux-starter-pack",planId:e.planId,name:e.planName,quantity:e.quantity,unitPrice:e.price,lineTotal:e.price*e.quantity})))},totals:{subtotal:j,shipping:0,tax:b,total:_,currency:c.HA},customer:{firstName:m.firstName,lastName:m.lastName,email:m.email,phone:m.phone},shippingAddress:{address1:m.address1,address2:m.address2||void 0,city:m.city,state:m.state||void 0,postalCode:m.postalCode,country:m.country},billingAddress:y?{address1:m.address1,address2:m.address2||void 0,city:m.city,state:m.state||void 0,postalCode:m.postalCode,country:m.country}:{address1:A.address1,address2:A.address2||void 0,city:A.city,state:A.state||void 0,postalCode:A.postalCode,country:A.country},returnUrl:r,cancelUrl:t},s=await h(a);if(!s.checkoutUrl)throw new Error("PayMe n\u2019a pas renvoy\xe9 de checkoutUrl");localStorage.setItem("lastOrderId",s.orderId),localStorage.setItem("lastOrderNumber",s.orderNumber),s.paymeSaleId&&localStorage.setItem("lastPaymeSaleId",s.paymeSaleId),(0,c.sx)("checkout_progress",{step:"redirect_to_payme",order_id:s.orderId,order_number:s.orderNumber}),window.location.href=s.checkoutUrl}catch(r){console.error("Order failed:",r);const e=(null===r||void 0===r?void 0:r.message)||"Checkout error";u(e),o(!1)}},children:[(0,K.jsxs)($,{children:[(0,K.jsx)(Q,{children:"Shipping Information"}),(0,K.jsxs)(V,{children:[(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"First Name"}),(0,K.jsx)(G,{type:"text",name:"firstName",value:m.firstName,onChange:S,placeholder:"John",required:!0})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"Last Name"}),(0,K.jsx)(G,{type:"text",name:"lastName",value:m.lastName,onChange:S,placeholder:"Doe",required:!0})]}),(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Email"}),(0,K.jsx)(G,{type:"email",name:"email",value:m.email,onChange:S,placeholder:"john@example.com",required:!0})]}),(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Phone"}),(0,K.jsx)(G,{type:"tel",name:"phone",value:m.phone,onChange:S,placeholder:"+1 (555) 123-4567",required:!0})]}),(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Address"}),(0,K.jsx)(G,{type:"text",name:"address1",value:m.address1,onChange:S,placeholder:"123 Main Street",required:!0})]}),(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Apartment, suite, etc. (optional)"}),(0,K.jsx)(G,{type:"text",name:"address2",value:m.address2,onChange:S,placeholder:"Apt 4B"})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"City"}),(0,K.jsx)(G,{type:"text",name:"city",value:m.city,onChange:S,placeholder:"New York",required:!0})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"State"}),(0,K.jsxs)(ee,{name:"state",value:m.state,onChange:S,required:!0,children:[(0,K.jsx)("option",{value:"",children:"Select State"}),(0,K.jsx)("option",{value:"NY",children:"New York"}),(0,K.jsx)("option",{value:"CA",children:"California"}),(0,K.jsx)("option",{value:"TX",children:"Texas"})]})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"ZIP Code"}),(0,K.jsx)(G,{type:"text",name:"postalCode",value:m.postalCode,onChange:S,placeholder:"10001",required:!0})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"Country"}),(0,K.jsxs)(ee,{name:"country",value:m.country,onChange:S,required:!0,children:[(0,K.jsx)("option",{value:"US",children:"United States"}),(0,K.jsx)("option",{value:"CA",children:"Canada"})]})]})]})]}),(0,K.jsxs)($,{children:[(0,K.jsx)(Q,{children:"Payment"}),(0,K.jsx)(ne,{children:(0,K.jsxs)(re,{selected:"payme"===a,children:[(0,K.jsx)(te,{children:"\ud83d\udd12"}),(0,K.jsx)(ae,{children:"PayMe (secure checkout)"})]})})]}),(0,K.jsxs)($,{children:[(0,K.jsx)(Q,{children:"Billing Address"}),(0,K.jsx)("div",{style:{marginBottom:"1rem",color:"#cccccc"},children:(0,K.jsxs)("label",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[(0,K.jsx)("input",{type:"checkbox",checked:y,onChange:e=>g(e.target.checked)}),"Same as shipping address"]})}),!y&&(0,K.jsxs)(V,{children:[(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Address"}),(0,K.jsx)(G,{type:"text",name:"address1",value:A.address1,onChange:C,placeholder:"123 Main Street",required:!0})]}),(0,K.jsxs)(J,{fullWidth:!0,children:[(0,K.jsx)(X,{children:"Apartment, suite, etc. (optional)"}),(0,K.jsx)(G,{type:"text",name:"address2",value:A.address2,onChange:C,placeholder:"Apt 4B"})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"City"}),(0,K.jsx)(G,{type:"text",name:"city",value:A.city,onChange:C,placeholder:"New York",required:!0})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"State"}),(0,K.jsxs)(ee,{name:"state",value:A.state,onChange:C,required:!0,children:[(0,K.jsx)("option",{value:"",children:"Select State"}),(0,K.jsx)("option",{value:"NY",children:"New York"}),(0,K.jsx)("option",{value:"CA",children:"California"}),(0,K.jsx)("option",{value:"TX",children:"Texas"})]})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"ZIP Code"}),(0,K.jsx)(G,{type:"text",name:"postalCode",value:A.postalCode,onChange:C,placeholder:"10001",required:!0})]}),(0,K.jsxs)(J,{children:[(0,K.jsx)(X,{children:"Country"}),(0,K.jsxs)(ee,{name:"country",value:A.country,onChange:C,required:!0,children:[(0,K.jsx)("option",{value:"US",children:"United States"}),(0,K.jsx)("option",{value:"CA",children:"Canada"})]})]})]})]})]}),(0,K.jsxs)(se,{children:[(0,K.jsx)(Q,{children:"Order Summary"}),n.map((e=>(0,K.jsxs)(ie,{children:[(0,K.jsxs)(oe,{children:[(0,K.jsx)(de,{children:e.planName}),(0,K.jsxs)(le,{children:["Qty: ",e.quantity]})]}),(0,K.jsxs)(ce,{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.planId))),(0,K.jsxs)(he,{children:[(0,K.jsx)(pe,{children:"Subtotal"}),(0,K.jsxs)(ue,{children:["$",j.toFixed(2)]})]}),(0,K.jsxs)(he,{children:[(0,K.jsx)(pe,{children:"Shipping"}),(0,K.jsx)(ue,{children:"FREE"})]}),(0,K.jsxs)(he,{children:[(0,K.jsx)(pe,{children:"Tax"}),(0,K.jsxs)(ue,{children:["$",b.toFixed(2)]})]}),(0,K.jsxs)(me,{children:[(0,K.jsx)(xe,{children:"Total"}),(0,K.jsxs)(ye,{children:["$",_.toFixed(2)]})]}),(0,K.jsx)(ge,{type:"submit",form:"checkout-form",disabled:i,onClick:()=>{(0,c.d4)({contentType:"checkout_place_order_click",location:"checkout_page"})},children:i?"Processing...":"Place Order"}),(0,K.jsxs)(Ae,{children:[(0,K.jsx)("span",{children:"\ud83d\udd12"}),(0,K.jsx)("span",{children:"You will be redirected to PayMe to complete the payment."})]})]})]})]})})}}}]);
//# sourceMappingURL=845.f7928955.chunk.js.map